function rtLogTracker(){}var RealTimeLogger=RealTimeLogger||{};
(function(){try{var rtLogConst=function(){};var awsSdkPath="";var kenpinHost=location.host.match(/^wwwtst\.(k[0-9]?[0-9]+\.)?/);if(kenpinHost&&kenpinHost[0])awsSdkPath=kenpinHost[0];rtLogConst.kinesisLibUrl_dev="https://wwwtst.rtlog.suumo.jp/RtLSServer/pc";rtLogConst.kinesisLibUrl="https://rtlog.suumo.jp/RtLSServer/pc";var rtLogUtil=function(){};rtLogUtil.isLocalFile=function(){var protocol=window.location.protocol.toUpperCase();if(protocol==="HTTP:"||protocol==="HTTPS:")return false;else return true};
rtLogUtil.PageCondition=function(){this.developerMode=false;this.isNoTracePV=false;this.actionType="";this.templateId="";this.serviceShubetsuCd="";this.pageId="";this.url=(location.protocol=="https"?"http:":location.protocol)+"//"+location.host+location.pathname;this.title=document.title;this.parameters="";this.referrer=document.referrer;this.userAgent=navigator.userAgent;if("s"in window&&s&&s.pageName)this.pageId=s.pageName;if(!("SuumoPageData"in window)||!SuumoPageData||!SuumoPageData.rtLog)return;
this.parameters=SuumoPageData.rtLog;if(this.parameters.action_type)this.actionType=this.parameters.action_type;if(this.parameters.template_id)this.templateId=this.parameters.template_id;if(this.parameters.service_shubetsu_cd)this.serviceShubetsuCd=this.parameters.service_shubetsu_cd;if(location.host.match(/^(wwwtst.)/))this.developerMode=true;if(this.parameters.kinesis_no_tpv)this.isNoTracePV=true};rtLogUtil.getKinesisQueryObject=function(wkat,templateId,pageId,serviceShubetsuCd,parameters,url,referrer,
title){var suumoIDCookie=rtLogCookieUtil.getCookieValue("GalileoCookie");if(suumoIDCookie==null)suumoIDCookie="";var wkgc=rtLogCookieUtil.getCookieValue("__wk_GC");if(wkgc==null)wkgc="";var userIDCookie=rtLogCookieUtil.getUserIDCookie();if(userIDCookie==null){userIDCookie=new UserIDCookie;userIDCookie.userID="";userIDCookie.vc=0}var sessionIDCookie=rtLogCookieUtil.getSessionIDCookie();if(sessionIDCookie==null){sessionIDCookie=new SessionIDCookie;sessionIDCookie.expire=0;sessionIDCookie.sessionID=
"";sessionIDCookie.vc=0}var queries={};queries.RECEIVE_DATE_TIME="";queries.B_VER="2020121401";queries.ACTION_TYPE=wkat;queries.TEMPLATE_ID=templateId;queries.SERVICE_SHUBETSU_CD=serviceShubetsuCd;queries.PAGE_ID=pageId;queries.URL=url;queries.TITLE=title;queries.REFERRER=referrer;queries.PARAMETERS=rtLogUtil.getParametersValue(parameters);queries.WK_A=userIDCookie.userID;queries.WK_B=sessionIDCookie.sessionID;queries.WK_GC=wkgc;queries.GALILEOCOOKIE=suumoIDCookie;queries.USER_AGENT=navigator.userAgent;
queries.REMOTE_ADDR="";return queries};rtLogUtil.getParametersValue=function(rtLog){var toString=Object.prototype.toString;var params="";var typeName="";var i=0;var isFirstProp=true;var key;for(key in rtLog){typeName=toString.call(rtLog[key]);if(typeName=="[object Array]"){var j=0;for(;j<rtLog[key].length;j=j+1)if(rtLog[key][j]){params=params+((isFirstProp?"":"&")+key+"="+rtLog[key][j]);isFirstProp=false}}else if(rtLog[key]){params=params+((isFirstProp?"":"&")+key+"="+rtLog[key]);isFirstProp=false}i=
i+1}return params};var UserIDCookie=function(){this.userID=null;this.vc=0;this.getCookieValue=function(){return this.userID+"|"+this.vc}};var SessionIDCookie=function(){this.expire=null;this.sessionID=null;this.vc=null;this.getCookieValue=function(){return this.expire+"|"+this.sessionID+"|"+this.vc}};var rtLogCookieUtil=function(){};rtLogCookieUtil.getCookieValue=function(name){var cookies=document.cookie.split(";");var i=0;for(;i<cookies.length;i++){var cookie=cookies[i];var nameAndValue=cookie.split("=");
var cookieName=nameAndValue[0].replace(/(^\s+)|(\s+$)/g,"");if(name==cookieName){var cookieValue=nameAndValue[1].replace(/(^\s+)|(\s+$)/g,"");return cookieValue}}return null};rtLogCookieUtil.getUserIDCookie=function(){var wkAVal=rtLogCookieUtil.getCookieValue("__wk_a");var userID=null;var vc=0;if(wkAVal==null)return null;else if(!wkAVal.match("^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}\\|[0-9]+$"))return null;else{var idx=wkAVal.indexOf("|");userID=wkAVal.substring(0,
idx);vc=Number(wkAVal.substring(idx+1));if(vc<0||0x7fffffffffffffff<vc)return null;var userIDCookie=new UserIDCookie;userIDCookie.userID=userID;userIDCookie.vc=vc;return userIDCookie}};rtLogCookieUtil.getSessionIDCookie=function(){var wkBVal=rtLogCookieUtil.getCookieValue("__wk_b");if(wkBVal==null)return null;else if(!wkBVal.match("^[0-9]+\\|[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}\\|[0-9]+$"))return null;else{var idx1=wkBVal.indexOf("|");var idx2=wkBVal.indexOf("|",
idx1+1);var date=new Date;var expDate=new Date;expDate.setTime(wkBVal.substring(0,idx1));if(isNaN(expDate)||expDate.getTime()<date.getTime())return null;var sessionID=wkBVal.substring(idx1+1,idx2);var vc=Number(wkBVal.substring(idx2+1));if(vc<0||0x7fffffffffffffff<vc)return null;var sessionIDCookie=new SessionIDCookie;sessionIDCookie.expire=expDate.getTime();sessionIDCookie.sessionID=sessionID;sessionIDCookie.vc=vc;return sessionIDCookie}};rtLogTracker.tracePageView=function(){if(rtLogUtil.isLocalFile())return;
if(!("SuumoPageData"in window)||!SuumoPageData||!SuumoPageData.rtLog)return;var condition=new rtLogUtil.PageCondition;if(condition.isNoTracePV)return;rtLogTracker.sendToKinesis(condition)};rtLogTracker.sendToKinesis=function(condition){RealTimeLogger=rtLogUtil.getKinesisQueryObject(condition.actionType,condition.templateId,condition.pageId,condition.serviceShubetsuCd,condition.parameters,condition.url,condition.referrer,condition.title);if(RealTimeLogger===null)return;if(condition.developerMode)rtLogTracker.sendToKinesisCore(RealTimeLogger,
rtLogConst.kinesisLibUrl_dev);else rtLogTracker.sendToKinesisCore(RealTimeLogger,rtLogConst.kinesisLibUrl)};rtLogTracker.sendToKinesisCore=function(kinesisQuery,KinesisUrl){var param=JSON.stringify(kinesisQuery);var encoded=encodeURIComponent(param);var postData="param="+encoded;var req=new XMLHttpRequest;req.open("POST",KinesisUrl);req.setRequestHeader("Content-Type","application/x-www-form-urlencoded");req.send(postData)};rtLogTracker.tracePageView()}catch(e){}})();